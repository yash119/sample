<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Vast Challenge 2 </title>
</head>

  <script src="https://cdn.jsdelivr.net/npm/vega@4.3.0/build/vega.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@3.0.0-rc8/build/vega-lite.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.20.0/build/vega-embed.js"></script>

<style>
    /* Add space between Vega-Embed links  */
    .vega-actions a {
      margin-right: 5px;
                    }
 p { 
    font-weight: normal;

   } 
/* #id1{

} */

</style>
<body>
    <div>
        <div style=" display: table; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; 
        font-size: 20px;
        
        margin-right: auto;
        margin-left: auto; ">
        <li style=" list-style-type:none;">
            <ul>
                    <b/> Vast Challenge 2018 Mini Challenge 2
            </ul>
            <ul>
                Student Name: Yashwanth Nandyala 
            </ul>
            <ul>
                Student Number: M00692454
            </ul>
        </li>
        </div>
    <h2> 1. Characterize the past and most recent situation with respect to chemical contamination in the Boonsong Lekagul waterways. Do you see any trends of possible interest in this investigation? Your submission for this questions should contain no more than 10 visualisations and 1000 words. </h2>
    <h3><u>Explaination:</u></h3>     
    <h4> visualations for some important chemicals </h4>
    
    

<h1>Chloridinine across the locations over the Time</h1>
<p>
    
The levels of Chlorodinine have all significantly dropped in recent years. Despite a uniform drop across all locations, Kohsoom alone experiences a spike in it in June 2016 as seen below.
</p>

  <!-- Container for the visualization -->
  <div id="vis3"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec3 = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": " Values across locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
               ],
  "width": 1100,
  "height": 500,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/Chloridinine.csv"
          },
  "mark": "line",
  "encoding": {
    "x": {
        "timeUnit": "yearmonth", "field": "sample date", "type": "temporal",
      "axis": {"format": "%Y"}
    
    },
    "y": {
      
      "field": "Chlorodinine value",
      "type": "quantitative"
    },
    "color": {"field": "location"}
  }      
  }
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis3", vlSpec3);
  </script>
  

<h1>Magnesium across the locations over the time</h1>
<p> 
    There is a clear period in February to May 2011, where all locations of a particular stream (Boonsri-Kohsoom-Chai- Busrakhan-Kannika) along with Somchair, show a clear uptrend.</p>
<!-- Container for the visualization -->
<div id="vis4"></div>

<script>
// Assign the specification to a local variable vlSpec.
var vlSpec4 = 

{
"$schema": "https://vega.github.io/schema/vega-lite/v3.json",
"description": " Values across the locations",
"transform": [
    {
        "filter": "datum.symbol !== 'GOOG'"
    }
             ],
"width": 1100,
"height": 500,
"data": {
    /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
    "url": "CW2 zip/Modified CSV files/Magnesium.csv"
        },
        "mark": "line",
"encoding": {
  "x": {
    "field": "sample date",
    "type": "temporal",
    "scale": {"rangeStep": 50, "padding": 0.5}
  },
  "y": {
    
    "field": "Magnesium value",
    "type": "quantitative"
  },
  "color": {"field": "location", "type": "nominal"}
}



}
// Embed the visualization in the container with id `vis,
vegaEmbed("#vis4", vlSpec4);
</script>

<h1>Ammonium across the Locatoins over the time</h1>
<p>  The Below visualisations shows:
    <ol>
        <li>
            The levels of Ammonium at Kohsoom has been higher as compared to the other locations throughout the timeframe.
        </li>
        <li>
            Significant spikes occurring throughout 2014-2016 in Kohsoom.
        </li>
        <li>
            While the overall average of Ammonium across locations is 620 ï¿½g/l, the average value at Kohsoom constantly hovers above it (the value shown by the moving line across time).
        </li>
        <li>
            A change-point is being detected around July 2008, where the average Kohsoom concentration of Ammonium jumps from around 2100 to more than 2300.
        </li>
        <li>
            Tansanee in the recent years also shows continual spikes in Ammonium, with a peak attained in November 2014.
        </li>
    </ol>
    
<p>By stepping through the chemical filters, we infer higher baselines at Kohsoom are also found for Orthophosphorus-Phosphorus with peaks in December 2013.

Total Phosphorus as well, follows a very similar uptrend at Kohsoom, with an average twice over the baseline of all other locations.
</p>
  <!-- Container for the visualization -->

  <div id="vis1"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec1 = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": "Ammonium Values across the locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
  ],
  "width": 1050,
  "height": 40,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/Ammonium.csv"

  },
  "mark": "bar",
    "encoding": {
      "x": {
          "field": "sample date",
          "type": "temporal",
          "axis": {
              "title": "Year",
              "grid": false
          }
      },
      "y": {
          "field": "Ammonium value",
          "type": "quantitative",
          "axis": {
              "title": "",
              "grid": false
          }
      },
      "color": {
          "field": "Ammonium value",
          "type": "nominal",
          "legend": null 
      },
      "row": {
          "field": "location",
          "type": "nominal",
          "header": {"title": "Ammonium values across the locations"}
      }
  }
}
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis1", vlSpec1);
  </script>

<h1>Anionic across the locations</h1>
<!-- Container for the visualization -->
<p>
    
It is quite evident that the concentration of Anionic active surfactants is increasing from May 2015 nearer to Kohsoom. The site Boonsri, which is nearer to the dumping site as well, shows an abnormal deviation away from the baseline, whereas all other locations have been dormant in the same time-period.
</p>
<div id="vis2"></div>

<script>
// Assign the specification to a local variable vlSpec.
var vlSpec2 = 

{
"width": 1100,
"height": 500,
"$schema": "https://vega.github.io/schema/vega-lite/v3.json",
"description": "Stock prices of 5 Tech Companies over Time.",
"data": {"url": "CW2 zip/Modified CSV files/anionic.csv"},
"mark": "line",
"encoding": {
  "x": {"field": "sample date", "type": "temporal"},
  "y": {"field": "Anionic value", "type": "quantitative"},
  "color": {"field": "location", "type": "nominal"}
}
}

// Embed the visualization in the container with id `vis,
vegaEmbed("#vis2", vlSpec2);
</script>



<h1> Methylosmoline across the locations</h1>
  <!-- Container for the visualization -->
  <p>
    It is very evident that around January 2016, Methylosmoline levels start to spike up at two locations, namely Kohsoom and Somchair.
  </p>
  <div id="vis5"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec5 = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": " Values across locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
               ],
  "width": 1100,
  "height": 500,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/Methylo.csv"
          },  
          "mark": "line",
  "encoding": {
    "x": {
      "timeUnit": "yearmonth", "field": "sample date", "type": "temporal",
      "axis": {"format": "%Y"}
    },
    "y": {
      "field": "Methylosmoline value", "type": "quantitative"
    },
    "color": {
      "field": "location",
      "type": "nominal",
      "scale": {"scheme": "category20b"}
    }
  }


     
  }
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis5", vlSpec5);
  </script>

<h1> Total nitrogen across the locations</h1>
<!-- Container for the visualization -->
<p>
    It is clearly visible that during the period of July 2014 to June 2015 in addition to Kohsoom, an uptrend in Total Nitrogen is visible at Tansanee as well.
</p>
<div id="vis6"></div>

<script>
// Assign the specification to a local variable vlSpec.
var vlSpec6 = 

{
"$schema": "https://vega.github.io/schema/vega-lite/v3.json",
"description": " Values across locations",
"transform": [
    {
        "filter": "datum.symbol !== 'GOOG'"
    }
             ],
"width": 1150,
"height": 500,
"data": {
    /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
    "url": "CW2 zip/Modified CSV files/Nitrogen.csv"
        },
        
        "mark": "bar",
"encoding": {
  "x": {
    
    "timeUnit": "yearmonth", "field": "sample date", "type": "temporal",
      "axis": {"format": "%Y"}
    
  },
  "y": {
    "field":"Total nitrogen value",
    "type": "quantitative"
  },
  "color": {
    "field": "location",
    "type": "nominal",
    
    "legend": {"title": "location"}
  }
}

   
}
// Embed the visualization in the container with id `vis,
vegaEmbed("#vis6", vlSpec6);
</script>

<h1> Water temperature across the locatinos</h1>
  <!-- Container for the visualization -->
  <p>
    The cycle plot developed shows the temperature of water goes up by 4-50 C during the months of June, July and August throughout the waterways.
  </p>
  <div id="vis7"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec7 = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": " Values across the locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
               ],
  "width": 1100,
  "height": 500,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/water temp.csv"
          },
     
          "mark": "trail",
  "encoding": {
    "x": {"field": "sample date", "type": "temporal"},
    "y": {"field": "Water temperature value", "type": "quantitative"},
    /*"size": {"field": "price", "type": "quantitative"}, */
    "color": {"field": "location", "type": "nominal"}
  }

     
  }
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis7", vlSpec7);
  </script>

    </div>

    <div>
        <p>
                In the order of appearance below, one can see discernible patterns in the following chemicals.</p>
        <ol>
        <li>
            
                    Ammonium:
            
            <p> constant uptrend is found at Kohsoom as compared to the other locations. Though the peak of Ammonium at Kohsoom was in 1998, the PCT 2 band shows there is consistently higher levels of Ammonium found at Kohsoom. More recently, Tansanee has begun to show spikes.</p>
        </li>
        <li>
                        Anionic Active Surfactants:
            
            <p>Abnormalities in Kohsoom and Boonsri alone, with all other locations being dormant.</p>
        </li>
        <li>
                
                        Chlorodinine:
                
            <p> Abnormality at Kohsoom.       </p>    
        </li>
        <li>
               
                        Magnesium:
                
                <p>
                        A period where there is consistency in uptrend across the locations.
                </p>
        </li>
        <li>
                
                        Methylosmoline:
                
                <p> Kohsoom and Somchair show some patterns of interest. </p>
        </li>
        <li>
                
                        Total Nitrogen:
                
                <p> Tansanee shows high spikes (more PCT5 bands) in recent years. </p>
        </li>
        <li>
                
                        Water Temperature:
                
                <p> Has a very seasonal pattern.</p>
        </li>
    </oi>
    </div>
    <div>
        <P>
            <u>
                A few notes on Data Preprocessing:
            </u>
            <ul>
                <li>
                    Macrozoobenthos is a chemical which does not have units of measurement, hence it is excluded from all analysis.
                </li>
                <li>
                    Water temperature, which is a physical property has different unit of measurement as compared to the rest.
                </li>
                <li>
                    The readings of the chemicals represented on the figures above and below, refer to the average value is being used. Tableau helps to automatically convert multiple readings at a particular time/location by aggregating them.
                </li>
            </ul>

        </P>


    </div>

    <div>

    <h2> 2. What anomalies do you find in the waterway samples dataset? How do these affect your analysis of potential problems to the environment? Is the Hydrology Department collecting sufficient data to understand the comprehensive situation across the Preserve? What changes would you propose to make in the sampling approach to best understand the situation? Your submission for this question should contain no more than 6 visualisations and 500 words.  </h2>
    <h4> <u>
        Explaination
    </u> </h4>
    <h4>
        The August 2003 Effect
    </h4>
    <p>
            Several locations show a spike in a Chromium, Manganese, Copper and Iron just for one day, leading the team to believe it might be an anomaly in the readings. This might probably due to a wrong calibration of the measuring equipment. This is noticed to be happening at every location except Boonsri
    </p>
    <h2> What happened on 15th Aug, 2003?</h2>
 
    <div id="vis8"></div>

    <script>
    // Assign the specification to a local variable vlSpec.
    var vlSpec8 = 
    
    {
    "width": 1100,
    "height": 80,
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "description": "Stock prices of 5 Tech Companies over Time.",
    "data": {"url": "CW2 zip/Modified CSV files/effect for chemicals.csv"},
    "mark": "line",
    "encoding": {
      "x": {"field": "sample date", "type": "temporal"},
      "y": {"field": "values", "type": "quantitative"},
      
      "row": {
            "field": "measure",
            "type": "nominal",
           "title": "some important chemicals"
        }
    }
  }
  
    // Embed the visualization in the container with id `vis,
    vegaEmbed("#vis8", vlSpec8);
    </script>


    <h3>
            The surge in unique measurements</h3>
        <p>
                On average, there were 43 chemicals measured in a typical year. 2008 and 2009 saw the introduction of over 35 chemicals, leading to the surge in the number of unique chemicals captured. How this affects the analysis is that these unique set of chemicals cannot be compared neither before nor after that specific narrow timeframe. We presume that the hydrology department had an impending need to collect a few samples during those two years, for some research purposes, but later dropped the initiative.

 

                The heatmap illustrates that only a 20% of the total chemicals (21 out of 105) had measurements in all years of the sampling. It also shows which chemicals were measured only as part of the two-year surge.
        </p>

        <h1> Heatmap of recordings of each chemical over the years</h1>
  <!-- Container for the visualization -->
  <div id="vis"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": " Values across locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
               ],
  "width": 1300,
  "height": 1500,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/boonsong lekagul waterways readings.csv"
          },
     
     "mark":{
     
"type": "circle",

"opacity": 0.8,

"stroke": "black",

"strokeWidth": 1

},

"encoding": {

"x": {

"field": "sample date",

"type": "temporal",

"axis": {"labelAngle": 0}

},

"y": {"field": "measure", "type":
"nominal", "axis": {"title": ""}},

"size": {

"legend": {"title": "", "clipHeight":
30},

"scale": {"range": [0, 5]}

},



}     
     


     
  }
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis", vlSpec);
  </script>


<h1> Total hardness in Boonsri and Kohsoom</h1>
<p>
    Total Hardness, as seen below, seem quite anomalous for the fact that no other location was measured during 2011-2012 (light sky blue color). This induces a doubt that some readings could have been tampered with, for the sake of achieving environment compliance, etc.
</p>
<!-- Container for the visualization -->
<div id="vis10"></div>

<script>
// Assign the specification to a local variable vlSpec.
var vlSpec10 = 

{
"$schema": "https://vega.github.io/schema/vega-lite/v3.json",
"description": " Values across locations",
"transform": [
    {
        "filter": "datum.symbol !== 'GOOG'"
    }
             ],
"width": 1100,
"height": 57,
"data": {
    /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
    "url": "CW2 zip/Modified CSV files/total hardness.csv"
        },
        "mark": "bar",
"encoding": {
  "x": {
  
    "timeUnit": "yearmonth", "field": "sample date", "type": "temporal",
    "axis": {"format": "%Y"}

  },
  "y": {
    "field": "value",
    "type": "quantitative"
  },
  "row": {"field": "location", "type": "nominal"}
}



   
}
// Embed the visualization in the container with id `vis,
vegaEmbed("#vis10", vlSpec10);
</script>


<h1> Coverage of the sampling  </h1>
<p>
The plots below show that the coverage of locations are disproportionate, implying the hydrology department has not collected comprehensive data across the preserve. It is also affected by the fact that Achara, Decha and Tansanee started to be measured only from 2009.

4 segments are visible from an analysis of the total number of records. ([Chai & Boonsri], [Kannika & Sakda], [ Kohsoom, Somchair & Busarkhan], [Achara, Decha & Tansanee]).
</p>
<!-- Container for the visualization -->
<div id="vis11"></div>

<script>
// Assign the specification to a local variable vlSpec.
var vlSpec11 = 

{
"$schema": "https://vega.github.io/schema/vega-lite/v3.json",
"description": " Values across locations",
"transform": [
    {
        "filter": "datum.symbol !== 'GOOG'"
    }
             ],
"width": 1100,
"height": 90,
"data": {
    /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
    "url": "CW2 zip/Modified CSV files/Boonsong Lekagul waterways readings.csv"
        },
        
        "mark": "line",
"encoding": {
  "x": {"field": "sample date", "type": "temporal"},
  "y": { "aggregate": "count","field": "value", "type": "quantitative"},
  "color": {"field": "location", "type": "nominal"},
  "row": {
        "field": "location",
        "type": "nominal",
        "header": {"title": "Ammonium values across the locations"}
    }
  
}
}

   

// Embed the visualization in the container with id `vis,
vegaEmbed("#vis11", vlSpec11);
</script>

<p> <u>sequential sampling approach: </u>  

    Currently, analysis of chemical settlement along river flow is hard to do, as there is no indication of river flow. For a thorough analysis, along the same stream, points upstream and downstream must be measured sequentially. For e.g. if Boonsri was measured in the first week, then it makes sense to compare the same chemical if it has propagated downstream to Chai or Kannika during the second/third week. Given the date of sampling and location, we find the percentage of common routes taken in a river system</p>


    <h3>
        Suggestion for a possible route
    </h3>
    <img src="CW2 zip/images/possible route.PNG" />
    
    </div>
    <div>
    <h2> 3. After reviewing the data, do any of your findings cause particular concern for the Pipit or other wildlife? Would you suggest any changes in the sampling strategy to better understand the waterways situation in the Preserve? Your submission for this question should contain no more than 6 visualisations and 500 words. </h2>
    <h4> Explaination </h4>
    <h3> Drop in Oxygen Saturation Levels </h3>
    <p>
            Birds and wildlife feed off water, and Oxygen is essential for any living organism, but Oxygen saturation in water is clearly depleting lower near Kohsoom and Tansanee.
    </p>
    <!-- Container for the visualization -->
    <div id="vis12"></div>
  
    <script>
    // Assign the specification to a local variable vlSpec.
    var vlSpec12 = 
    
    {
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "description": " Values across locations",
    "transform": [
        {
            "filter": "datum.symbol !== 'GOOG'"
        }
                 ],
    "width": 1200,
    "height": 500,
    "data": {
        /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
        "url": "CW2 zip/Modified CSV files/Oxygen saturation.csv"
            },
            
            "mark": "area",
    "encoding": {
      "x": {
        "timeUnit": "yearmonth", "field": "sample date", "type": "temporal",
        "axis": {"format": "%Y"}
      },
      "y": {
        "aggregate": "average", "field": "value", "type": "quantitative"
      },
      "color": {
        "field": "location",
        "type": "nominal"
      }
    }
  }
  
       
    
    // Embed the visualization in the container with id `vis,
    vegaEmbed("#vis12", vlSpec12);
    </script>

    <h3>
        Lead contamination
    </h3>
    <p>
            At Kohsoom, Somchair and Boonsri, a steep uptrend in lead contamination levels is seen. Lead is a harmful contaminant in water.
    </p>

    <div id="vis13"></div>

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec13 = 
  
  {
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": " Values across locations",
  "transform": [
      {
          "filter": "datum.symbol !== 'GOOG'"
      }
               ],
  "width": 1200,
  "height": 100,
  "data": {
      /*"url": "CW2 zip/Boonsong Lekagul waterways readings.csv",*/
      "url": "CW2 zip/Modified CSV files/lead contamination.csv"
          },

          "mark": "line",
  "encoding": {
    "x": {"field": "sample date", "type": "temporal"},
    "y": {"aggregare":"mean","field": "value", "type": "quantitative"}, 
    "row": {
          "field": "location",
          "type": "nominal",
         "title": "some important chemicals"
      }
  }
  }   
  
  // Embed the visualization in the container with id `vis,
  vegaEmbed("#vis13", vlSpec13);
  </script>

  




    </div>
</body>
</html>